<nav class="navbar navbar-expand-lg navbar-light d-block d-lg-none nav-bg-color my-1">
    <div class="container-fluid">
        <button class="navbar-toggler mobile-nav-button my-auto" type="button" data-bs-toggle="collapse"
            data-bs-target="#mobile-nav" aria-controls="mobile-nav" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="text-center my-auto dropdown">
            <a class="dropdown-toggle text-decoration-none icon" href="#" id="mobile-account-menu"
                data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa-solid fa-user d-block"></i>
                <span>My Account</span>
            </a>
            <div class="dropdown-menu" aria-labelledby="user-options">
                {% if request.user.is_authenticated %}
                <!-- add link to accounts -->
                <a class="dropdown-item" href="{% url 'profile' %}">My Profile</a>
                <a class="dropdown-item" href="{% url 'account_logout' %}">Logout</a>
                {% if request.user.is_superuser %}
                <!-- Source: https://mdbootstrap.com/docs/standard/extended/dropdown-multilevel/# -->
                <li>
                    <a class="dropdown-item" href="#">
                        <i class="fa-solid fa-gear me-1"></i> Product Management <i class="fa-solid fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-submenu">
                        <li>
                            <a class="dropdown-item" href="{% url 'add_book' %}">Add Book</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="{% url 'add_comic' %}">Add Comic</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="{% url 'admin:index' %}">Admin Panel</a>
                        </li>
                    </ul>
                </li>
                {% endif %}
                {% else %}
                <a class="dropdown-item" href="{% url 'account_login' %}">Login</a>
                <a class="dropdown-item" href="{% url 'account_signup' %}">Register</a>
                {% endif %}

            </div>
        </div>
        <!-- Shopping basket total-->

        <div class="text-center text-white my-auto">
            <a class="text-decoration-none {% if grand_total %}fw-bold full-bag-text animated-text{% else %}icon{% endif %}"
                href="{% url 'view_bag' %}" aria-label="Go to shopping basket">
                <i class="fa-solid fa-cart-shopping"></i>
                <!-- Add total here -->
                <p class="m-0">
                    {% if grand_total %}
                    ${{ grand_total|floatformat:2 }}
                    {% else %}
                    $0.00
                    {% endif %}
                </p>
            </a>
        </div>
        <div class="collapse navbar-collapse justify-content-center" id="mobile-nav">
            <ul class="navbar-nav text-lg-end me-2">
                <li class="nav-item dropdown">
                    <a href="{% url 'home' %}" class="nav-link">
                        <h1 class="display-6 logo-font my-0 p-0 icon">
                            <strong>Owl</strong>
                            <span class="text-uppercase">Bookstore</span>
                        </h1>
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-decoration-none active text-uppercase icon text-white"
                        href="#" id="mobile-all-product-links" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        All products
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="mobile-all-product-links">
                        <li><a class="dropdown-item" href="{% url 'products' %}?sort=price&direction=asc">By Price</a>
                        </li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?sort=rating&direction=desc">By
                                Rating</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?sort=category&direction=asc">By
                                Category</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}">All Products</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-decoration-none active text-uppercase icon text-white"
                        href="#" id="mobile-book-categories-links" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Books
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="mobile-book-categories-links">
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=adventure"
                                aria-label="Adventure">Adventure</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=business"
                                aria-label="Business">Business</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=children"
                                aria-label="Children">Children</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=crime"
                                arial-label="Crime">Crime</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=drama"
                                aria-label="Drama">Drama</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=fiction"
                                aria-label="Fiction">Fiction</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=non_fiction"
                                aria-label="Non-fiction">Non-Fiction</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=religion"
                                aria-label="Religion">Religion</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=sci_fiction"
                                aria-label="Sci-Fiction">Sci-Fiction</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=science"
                                aria-label="Science">Science</a></li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=travel"
                                arial-label="Travel">Travel</a></li>
                        <!-- Update a views, if not using the line below -->
                        <!-- <li><a class="dropdown-item" href="{% url 'products' %}?category=books"
                                aria-label="All Books">All Books</a></li> -->
                        <li><a class="dropdown-item"
                                href="{% url 'products' %}?category=adventure,business,children,crime,drama,fiction,non_fiction,religion,sci_fiction,science,travel">All
                                Books</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-decoration-none active text-uppercase icon" href="#"
                        id="mobile-comics-links" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Comics
                    </a>
                    <ul class="dropdown-menu last-dropdown" aria-labelledby="mobile-comics-links">
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=marvel_universe"
                                aria-label="Marver Universe">Marvel</a>
                        </li>
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=dc_universe"
                                aria-label="DC Universe">DC</a></li>
                        <!-- If not using line below, update the views -->
                        <!-- <li><a class="dropdown-item" href="{% url 'products' %}?category=comics"
                                aria-label="All Comic Books">All Comics</a></li> -->
                        <li><a class="dropdown-item" href="{% url 'products' %}?category=marvel_universe,dc_universe"
                                aria-label="All Comic Books">All Comics</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <div class="d-flex justify-content-center flex-grow-1 search-box-container mt-2 mx-1 p-1">
        <!-- Add action to form -->
        <form action="{% url 'products' %}" method="GET" class="w-100">
            <div class="input-group">
                <input type="text" class="form-control rounded-1 border-orange" name="q"
                    placeholder="Search our library" aria-label="Search" aria-describedby="search-box">
                <button class="btn btn-orange rounded-1 border-orange" type="submit" id="mobile-search-query"
                    aria-label="Search product">
                    <span class="icon">
                        <i class="fas fa-search"></i>
                    </span>
                </button>
            </div>
        </form>
    </div>
</nav>